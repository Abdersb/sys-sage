\hypertarget{_topology_8hpp_source}{}\doxysection{Topology.\+hpp}
\label{_topology_8hpp_source}\index{/Users/stepan/Documents/phd/repos/sys-\/sage/src/Topology.hpp@{/Users/stepan/Documents/phd/repos/sys-\/sage/src/Topology.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef TOPOLOGY}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define TOPOLOGY}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <set>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}DataPath.hpp"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <libxml/parser.h>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_NONE 1}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_THREAD 2}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_CORE 4}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_CACHE 8}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_SUBDIVISION 16}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_NUMA 32}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_CHIP 64}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_MEMORY 128}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_STORAGE 256}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_NODE 512}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define SYS\_SAGE\_COMPONENT\_TOPOLOGY 1024}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define SYS\_SAGE\_SUBDIVISION\_TYPE\_NUMA 2048}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{29 \textcolor{keyword}{class }\mbox{\hyperlink{class_data_path}{DataPath}};}
\DoxyCodeLine{30 }
\DoxyCodeLine{35 \textcolor{keyword}{class }\mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{36 \textcolor{keyword}{public}:}
\DoxyCodeLine{37 }
\DoxyCodeLine{44     \mbox{\hyperlink{class_component_a8775db6d1a2c1afc2e77cd3c8f39da6f}{Component}}();}
\DoxyCodeLine{51     \mbox{\hyperlink{class_component_a8775db6d1a2c1afc2e77cd3c8f39da6f}{Component}}(\textcolor{keywordtype}{int} \_id, \textcolor{keywordtype}{string} \_name, \textcolor{keywordtype}{int} \_componentType);}
\DoxyCodeLine{52 }
\DoxyCodeLine{60     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a8506f89d8714c3fe2a3e435b97b5544f}{InsertChild}}(\mbox{\hyperlink{class_component}{Component}} * child);}
\DoxyCodeLine{66     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a18d4b870ab8f711d030d4a7f1291c42b}{SetParent}}(\mbox{\hyperlink{class_component}{Component}}* \mbox{\hyperlink{class_component_add189dc18ca4dd121d7dede5a0dbeab8}{parent}});}
\DoxyCodeLine{71     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_ad1cc172d9c737b978ad30f64196e96f9}{PrintSubtree}}();}
\DoxyCodeLine{77     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_ad1cc172d9c737b978ad30f64196e96f9}{PrintSubtree}}(\textcolor{keywordtype}{int} level);}
\DoxyCodeLine{82     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a6b7a769dc19d12ece34053a9b5294cc9}{PrintAllDataPathsInSubtree}}();}
\DoxyCodeLine{83 }
\DoxyCodeLine{89     \textcolor{keywordtype}{string} \mbox{\hyperlink{class_component_a1a9d620ac8795ddec325b7e05707b9ef}{GetName}}();}
\DoxyCodeLine{95     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_aa8e0d9af5f40df0ccad6be3edde7dad0}{GetId}}();}
\DoxyCodeLine{112     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_ad508ec920dee8d5800a3e285659c4dab}{GetComponentType}}();}
\DoxyCodeLine{129     \textcolor{keywordtype}{string} \mbox{\hyperlink{class_component_a32113dd8489115c7e9a1696a8018e7a6}{GetComponentTypeStr}}();}
\DoxyCodeLine{134     vector<Component*>* \mbox{\hyperlink{class_component_adbfab074ef1ad7f359f22eafb66b59dc}{GetChildren}}();}
\DoxyCodeLine{138     \mbox{\hyperlink{class_component}{Component}}* \mbox{\hyperlink{class_component_a877ef6f7e49b6d38019988b07a7ceb20}{GetParent}}();}
\DoxyCodeLine{143     \mbox{\hyperlink{class_component}{Component}}* \mbox{\hyperlink{class_component_ae747cc962324d0b1174bcab97efec34f}{GetChild}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{144 }
\DoxyCodeLine{152     \mbox{\hyperlink{class_component}{Component}}* \mbox{\hyperlink{class_component_a37dfa5d4a2453292326fe7e3207706be}{FindSubcomponentById}}(\textcolor{keywordtype}{int} \_id, \textcolor{keywordtype}{int} \_componentType);}
\DoxyCodeLine{158     \mbox{\hyperlink{class_component}{Component}}* \mbox{\hyperlink{class_component_adcd1f0282351370ad3abffd9224ecd9c}{FindParentByType}}(\textcolor{keywordtype}{int} \_componentType);}
\DoxyCodeLine{162     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_ad23ffe1aa55edc8b50e39b0835cdc2cf}{GetNumThreads}}();}
\DoxyCodeLine{168     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_a5b8958dfede66328449a187f52a60e69}{GetTopoTreeDepth}}();\textcolor{comment}{//0=empty, 1=1element,...}}
\DoxyCodeLine{177 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_afb13075452af21cb196771a01538db3b}{GetComponentsNLevelsDeeper}}(vector<Component*>* outArray, \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_a1f32d0806b8c40635e9d4224ed23dede}{depth}});}
\DoxyCodeLine{187     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_acceb7931c7ff2f553e62368e77430c60}{GetSubcomponentsByType}}(vector<Component*>* outArray, \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_ac6d7a80d187b4ec48f6bf6f084378ac0}{componentType}});}
\DoxyCodeLine{195     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_aebffe16d7a18f8eb0fc11e7962d4ed6a}{GetSubtreeNodeList}}(vector<Component*>* outArray);}
\DoxyCodeLine{196 }
\DoxyCodeLine{204     vector<DataPath*>* \mbox{\hyperlink{class_component_af29f5f5a1ee41d9b4d448482dc980a0e}{GetDataPaths}}(\textcolor{keywordtype}{int} orientation);}
\DoxyCodeLine{212     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_af1e3ffe6daf1aaf5fdd6dc640b27026a}{AddDataPath}}(\mbox{\hyperlink{class_data_path}{DataPath}}* p, \textcolor{keywordtype}{int} orientation);}
\DoxyCodeLine{220     \mbox{\hyperlink{class_data_path}{DataPath}}* \mbox{\hyperlink{class_component_a8e37c0f02a79fbaff3d6d2756b03f7f5}{GetDpByType}}(\textcolor{keywordtype}{int} dp\_type, \textcolor{keywordtype}{int} orientation);}
\DoxyCodeLine{230     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a76bfe3048d5aff8cd0af5c32329b2e81}{GetAllDpByType}}(vector<DataPath*>* outDpArr, \textcolor{keywordtype}{int} dp\_type, \textcolor{keywordtype}{int} orientation);}
\DoxyCodeLine{231 }
\DoxyCodeLine{238     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_a2be4dace6140a0de5f00d9d5ad189d59}{GetTopologySize}}(\textcolor{keywordtype}{unsigned} * out\_component\_size, \textcolor{keywordtype}{unsigned} * out\_dataPathSize);}
\DoxyCodeLine{248     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_a2be4dace6140a0de5f00d9d5ad189d59}{GetTopologySize}}(\textcolor{keywordtype}{unsigned} * out\_component\_size, \textcolor{keywordtype}{unsigned} * out\_dataPathSize, std::set<DataPath*>* counted\_dataPaths);}
\DoxyCodeLine{249 }
\DoxyCodeLine{254     xmlNodePtr \mbox{\hyperlink{class_component_a2e7387f56a6aa133bc94f0aebebd0cc0}{CreateXmlSubtree}}();}
\DoxyCodeLine{255 }
\DoxyCodeLine{259     map<string,void*> \mbox{\hyperlink{class_component_a50334dc9af0c22ad2b05c038b2c8bc67}{attrib}};}
\DoxyCodeLine{260 \textcolor{keyword}{protected}:}
\DoxyCodeLine{261 }
\DoxyCodeLine{262     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_a7b51904172e22f13a182eb16b7de4aaf}{id}}; }
\DoxyCodeLine{263     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_a1f32d0806b8c40635e9d4224ed23dede}{depth}}; }
\DoxyCodeLine{264     \textcolor{keywordtype}{string} \mbox{\hyperlink{class_component_a3f51bb245c415a384cd29c60f7b25ba2}{name}}; }
\DoxyCodeLine{280     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_component_ac6d7a80d187b4ec48f6bf6f084378ac0}{componentType}};}
\DoxyCodeLine{281     vector<Component*> \mbox{\hyperlink{class_component_a6c3106b9a8ba60fead5f7bf3430ab00f}{children}}; }
\DoxyCodeLine{282     \mbox{\hyperlink{class_component}{Component}}* \mbox{\hyperlink{class_component_add189dc18ca4dd121d7dede5a0dbeab8}{parent}}; }
\DoxyCodeLine{283     vector<DataPath*> \mbox{\hyperlink{class_component_a40517588f7b89687289bea681c6bfc79}{dp\_incoming}}; }
\DoxyCodeLine{284     vector<DataPath*> \mbox{\hyperlink{class_component_a16af6908e826a8a2531f0a0e0d65d533}{dp\_outgoing}}; }
\DoxyCodeLine{286 \textcolor{keyword}{private}:}
\DoxyCodeLine{287 \};}
\DoxyCodeLine{288 }
\DoxyCodeLine{293 \textcolor{keyword}{class }\mbox{\hyperlink{class_topology}{Topology}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{294 \textcolor{keyword}{public}:}
\DoxyCodeLine{301     \mbox{\hyperlink{class_topology_aa3336e10118cd76ab4b4c2ebc5062a9a}{Topology}}();}
\DoxyCodeLine{302 \textcolor{keyword}{private}:}
\DoxyCodeLine{303 \};}
\DoxyCodeLine{304 }
\DoxyCodeLine{309 \textcolor{keyword}{class }\mbox{\hyperlink{class_node}{Node}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{310 \textcolor{keyword}{public}:}
\DoxyCodeLine{317     \mbox{\hyperlink{class_node_ad7a34779cad45d997bfd6d3d8043c75f}{Node}}();}
\DoxyCodeLine{324     \mbox{\hyperlink{class_node_ad7a34779cad45d997bfd6d3d8043c75f}{Node}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{325 }
\DoxyCodeLine{326 \textcolor{preprocessor}{\#ifdef CAT\_AWARE }\textcolor{comment}{//defined in CAT\_aware.cpp}}
\DoxyCodeLine{332 \textcolor{comment}{}    int UpdateL3CATCoreCOS();}
\DoxyCodeLine{333 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{334 }
\DoxyCodeLine{335 \textcolor{keyword}{private}:}
\DoxyCodeLine{336 \};}
\DoxyCodeLine{337 }
\DoxyCodeLine{342 \textcolor{keyword}{class }\mbox{\hyperlink{class_memory}{Memory}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{343 \textcolor{keyword}{public}:}
\DoxyCodeLine{350     \mbox{\hyperlink{class_memory_a585d7bb6fc6f2237bcebf94a86b7dd99}{Memory}}();}
\DoxyCodeLine{351 \textcolor{keyword}{private}:}
\DoxyCodeLine{352     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} size; }
\DoxyCodeLine{353     \textcolor{keywordtype}{boolean} is\_volatile; }
\DoxyCodeLine{354 \};}
\DoxyCodeLine{355 }
\DoxyCodeLine{360 \textcolor{keyword}{class }\mbox{\hyperlink{class_storage}{Storage}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{361 \textcolor{keyword}{public}:}
\DoxyCodeLine{368     \mbox{\hyperlink{class_storage_a80ef6af5e4c9fd4424ae16e808d05291}{Storage}}();}
\DoxyCodeLine{369 \textcolor{keyword}{private}:}
\DoxyCodeLine{370     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} size; }
\DoxyCodeLine{371 \};}
\DoxyCodeLine{372 }
\DoxyCodeLine{377 \textcolor{keyword}{class }\mbox{\hyperlink{class_chip}{Chip}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{378 \textcolor{keyword}{public}:}
\DoxyCodeLine{385     \mbox{\hyperlink{class_chip_ae51cc422c4293e52a3d9901968e7fe79}{Chip}}();}
\DoxyCodeLine{392     \mbox{\hyperlink{class_chip_ae51cc422c4293e52a3d9901968e7fe79}{Chip}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{393 \textcolor{keyword}{private}:}
\DoxyCodeLine{394 \};}
\DoxyCodeLine{395 }
\DoxyCodeLine{400 \textcolor{keyword}{class }\mbox{\hyperlink{class_cache}{Cache}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{401 \textcolor{keyword}{public}:}
\DoxyCodeLine{408     \mbox{\hyperlink{class_cache_a486f257a48e32d0083f8ae41f78074d1}{Cache}}();}
\DoxyCodeLine{417     \mbox{\hyperlink{class_cache_a486f257a48e32d0083f8ae41f78074d1}{Cache}}(\textcolor{keywordtype}{int} \_id, \textcolor{keywordtype}{int}  \_cache\_level, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \_cache\_size, \textcolor{keywordtype}{int} \_associativity);}
\DoxyCodeLine{421     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_cache_a5edc710de1a1e15c6ff9dd4da038fcd1}{GetCacheLevel}}();}
\DoxyCodeLine{425     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \mbox{\hyperlink{class_cache_a288f33b3406bd31a58be4d11b078a5c7}{GetCacheSize}}();}
\DoxyCodeLine{429     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_cache_a71cc633425926859fe231345c1ac7e80}{GetCacheAssociativityWays}}();}
\DoxyCodeLine{433     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_cache_a2d5d79bbd9eceb3ef05a1600d21ec9b1}{GetCacheLineSize}}();}
\DoxyCodeLine{434 }
\DoxyCodeLine{439     xmlNodePtr \mbox{\hyperlink{class_cache_a3196866277eff478f567992ded097834}{CreateXmlSubtree}}();}
\DoxyCodeLine{440 \textcolor{keyword}{private}:}
\DoxyCodeLine{441     \textcolor{keywordtype}{int} cache\_level;  }
\DoxyCodeLine{442     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} cache\_size;  }
\DoxyCodeLine{443     \textcolor{keywordtype}{int} cache\_associativity\_ways; }
\DoxyCodeLine{444     \textcolor{keywordtype}{int} cache\_line\_size; }
\DoxyCodeLine{445 \};}
\DoxyCodeLine{446 }
\DoxyCodeLine{451 \textcolor{keyword}{class }\mbox{\hyperlink{class_subdivision}{Subdivision}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{452 \textcolor{keyword}{public}:}
\DoxyCodeLine{459     \mbox{\hyperlink{class_subdivision_ac51db3c00b0e4f7543c34859ad846871}{Subdivision}}();}
\DoxyCodeLine{466     \mbox{\hyperlink{class_subdivision_ac51db3c00b0e4f7543c34859ad846871}{Subdivision}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{473     \mbox{\hyperlink{class_subdivision_ac51db3c00b0e4f7543c34859ad846871}{Subdivision}}(\textcolor{keywordtype}{int} \_id, \textcolor{keywordtype}{string} \_name, \textcolor{keywordtype}{int} \_componentType);}
\DoxyCodeLine{474 }
\DoxyCodeLine{479     xmlNodePtr \mbox{\hyperlink{class_subdivision_ad36acb67b490f9bb33d4f38612cd430b}{CreateXmlSubtree}}();}
\DoxyCodeLine{480 \textcolor{keyword}{protected}:}
\DoxyCodeLine{481     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_subdivision_a9648751c7b5e6a02822ac0fab36a0660}{type}}; }
\DoxyCodeLine{482 \};}
\DoxyCodeLine{483 }
\DoxyCodeLine{488 \textcolor{keyword}{class }\mbox{\hyperlink{class_numa}{Numa}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_subdivision}{Subdivision}} \{}
\DoxyCodeLine{489 \textcolor{keyword}{public}:}
\DoxyCodeLine{496     \mbox{\hyperlink{class_numa_ad7327e1b6f30b1111d7994bd29ebfbb7}{Numa}}();}
\DoxyCodeLine{503     \mbox{\hyperlink{class_numa_ad7327e1b6f30b1111d7994bd29ebfbb7}{Numa}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{511     \mbox{\hyperlink{class_numa_ad7327e1b6f30b1111d7994bd29ebfbb7}{Numa}}(\textcolor{keywordtype}{int} \_id, \textcolor{keywordtype}{int} \_size);}
\DoxyCodeLine{516     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_numa_a3b454f12e2870098a411dd004c020f99}{GetSize}}();}
\DoxyCodeLine{517 }
\DoxyCodeLine{522     xmlNodePtr \mbox{\hyperlink{class_numa_abd0fd7d48f8c9dd1600b5d2c9f83b18a}{CreateXmlSubtree}}();}
\DoxyCodeLine{523 \textcolor{keyword}{private}:}
\DoxyCodeLine{524     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} size; }
\DoxyCodeLine{525 \};}
\DoxyCodeLine{526 }
\DoxyCodeLine{531 \textcolor{keyword}{class }\mbox{\hyperlink{class_core}{Core}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{532 \textcolor{keyword}{public}:}
\DoxyCodeLine{539     \mbox{\hyperlink{class_core_a14e63188e0aa7c4a6f72d5501384d1f9}{Core}}();}
\DoxyCodeLine{546     \mbox{\hyperlink{class_core_a14e63188e0aa7c4a6f72d5501384d1f9}{Core}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{547 \textcolor{keyword}{private}:}
\DoxyCodeLine{548 \};}
\DoxyCodeLine{549 }
\DoxyCodeLine{554 \textcolor{keyword}{class }\mbox{\hyperlink{class_thread}{Thread}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_component}{Component}} \{}
\DoxyCodeLine{555 \textcolor{keyword}{public}:}
\DoxyCodeLine{562     \mbox{\hyperlink{class_thread_a95c703fb8f2f27cb64f475a8c940864a}{Thread}}();}
\DoxyCodeLine{569     \mbox{\hyperlink{class_thread_a95c703fb8f2f27cb64f475a8c940864a}{Thread}}(\textcolor{keywordtype}{int} \_id);}
\DoxyCodeLine{570 \textcolor{preprocessor}{    \#ifdef CAT\_AWARE }\textcolor{comment}{//defined in CAT\_aware.cpp}}
\DoxyCodeLine{577 \textcolor{comment}{}        long long GetCATAwareL3Size();}
\DoxyCodeLine{578 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{579 \textcolor{keyword}{private}:}
\DoxyCodeLine{580 \};}
\DoxyCodeLine{581 }
\DoxyCodeLine{582 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
